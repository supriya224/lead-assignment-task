{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Desktop/react-assignment-task/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/admin/Desktop/react-assignment-task/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/admin/Desktop/react-assignment-task/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";// eslint-disable-next-line import/no-extraneous-dependencies\nimport axios from\"axios\";// eslint-disable-next-line import/no-extraneous-dependencies\nimport toast from\"react-hot-toast\";import constants from\"../utils/constants\";axios.defaults.baseURL=constants.API_URL;// If you are using different URLs, consider removing this line and adding a baseURL in the Axios Config parameter.\nvar useAxios=function useAxios(axiosParams){var isDefaultApiCall=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var _useState=useState(),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var notify=function notify(err){return toast.error(\"Error: \".concat((err===null||err===void 0?void 0:err.message)||\"Something went wrong!!\"));};var _useState5=useState((axiosParams.method===\"GET\"||axiosParams.method===\"get\")&&isDefaultApiCall),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(params){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.request(params);case 3:result=_context.sent;setResponse(result);_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);notify(_context.t0);setError(_context.t0);case 11:_context.prev=11;setLoading(false);return _context.finish(11);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,7,11,14]]);}));return function fetchData(_x){return _ref.apply(this,arguments);};}();var sendData=function sendData(){setLoading(true);fetchData(axiosParams);};useEffect(function(){if((axiosParams.method===\"GET\"||axiosParams.method===\"get\")&&isDefaultApiCall){fetchData(axiosParams);}},[]);return{response:response,error:error,loading:loading,sendData:sendData};};export default useAxios;","map":{"version":3,"names":["useState","useEffect","axios","toast","constants","defaults","baseURL","API_URL","useAxios","axiosParams","isDefaultApiCall","arguments","length","undefined","_useState","_useState2","_slicedToArray","response","setResponse","_useState3","_useState4","error","setError","notify","err","concat","message","_useState5","method","_useState6","loading","setLoading","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","params","result","wrap","_callee$","_context","prev","next","request","sent","t0","finish","stop","_x","apply","sendData"],"sources":["/Users/admin/Desktop/react-assignment-task/src/hooks/useAxios.ts"],"sourcesContent":["import { useState, useEffect } from \"react\";\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport axios, { AxiosError, AxiosRequestConfig, AxiosResponse } from \"axios\";\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport toast from \"react-hot-toast\";\nimport constants from \"../utils/constants\";\n\naxios.defaults.baseURL = constants.API_URL;\n// If you are using different URLs, consider removing this line and adding a baseURL in the Axios Config parameter.\n\nconst useAxios = (\n  axiosParams: AxiosRequestConfig,\n  isDefaultApiCall: boolean = false\n) => {\n  const [response, setResponse] = useState<AxiosResponse>();\n  const [error, setError] = useState<AxiosError>();\n  const notify = (err: AxiosError) =>\n    toast.error(`Error: ${err?.message || \"Something went wrong!!\"}`);\n\n  const [loading, setLoading] = useState(\n    (axiosParams.method === \"GET\" || axiosParams.method === \"get\") &&\n      isDefaultApiCall\n  );\n\n  const fetchData = async (params: AxiosRequestConfig) => {\n    try {\n      const result = await axios.request(params);\n      setResponse(result);\n    } catch (err: any) {\n      notify(err);\n      setError(err as AxiosError);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const sendData = () => {\n    setLoading(true);\n    fetchData(axiosParams);\n  };\n\n  useEffect(() => {\n    if (\n      (axiosParams.method === \"GET\" || axiosParams.method === \"get\") &&\n      isDefaultApiCall\n    ) {\n      fetchData(axiosParams);\n    }\n  }, []);\n\n  return { response, error, loading, sendData };\n};\n\nexport default useAxios;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}